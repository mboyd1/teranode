# TSTN Seed Files

This directory contains seed files for bootstrapping a Teranode instance on the TSTN (Test STN - Scaling Test Network) Bitcoin SV network.

## Contents

The directory contains two seed files for block hash `0000000018d4bfb321b62f6b4db1eceb3b030cd5dcef86be908cab65afa7b6ed`:

1. **`0000000018d4bfb321b62f6b4db1eceb3b030cd5dcef86be908cab65afa7b6ed.utxo-headers`**
   - Binary file containing block headers up to the specified block
   - File format: U-H-1.0 (UTXO Headers version 1.0)
   - Contains sequential block header data with transaction counts and block heights

2. **`0000000018d4bfb321b62f6b4db1eceb3b030cd5dcef86be908cab65afa7b6ed.utxo-set`**
   - Binary file containing the complete UTXO (Unspent Transaction Output) set at the specified block
   - File format: U-S-1.0 (UTXO Set version 1.0)
   - Contains all unspent outputs needed to validate future transactions

## Purpose

These files are produced by the UTXO Persister service and are used to:

1. Initialize a new Teranode instance with blockchain state
2. Rapidly sync a node to a specific block height without processing all previous blocks
3. Bootstrap nodes for testing or development environments

## Usage

To import these seed files into a Teranode instance, use the `seeder` command via `teranodecli`:

```bash
network=tstn \
utxostore="aerospike://localhost:3000/utxo-store?set=utxo&externalStore=file://${DATADIR}/external" \
go run cmd/teranodecli/main.go seeder \
  -inputDir=/tmp \
  -hash=0000000018d4bfb321b62f6b4db1eceb3b030cd5dcef86be908cab65afa7b6ed
```

### Command Parameters

- `network=tstn` - Sets the network to TSTN
- `utxostore` - Connection string for the Aerospike UTXO store
  - `aerospike://localhost:3000/utxo-store` - Aerospike connection
  - `?set=utxo` - Aerospike set name for UTXO data
  - `&externalStore=file://${DATADIR}/external` - File path for large transaction data
- `-inputDir` - Directory containing the seed files (must match the location of these files)
- `-hash` - Block hash identifying which UTXO set to import

### Optional Flags

- `-skipHeaders` - Skip processing block headers (only import UTXOs)
- `-skipUTXOs` - Skip processing UTXOs (only import headers)

## Import Process

When you run the seeder command, it performs the following operations:

1. **Header Processing**:
   - Reads block headers from the `.utxo-headers` file
   - Stores each header in the blockchain store (PostgreSQL)
   - Tracks block height and transaction counts

2. **UTXO Processing**:
   - Reads UTXO data from the `.utxo-set` file
   - Converts UTXOs to Bitcoin transaction format
   - Stores all UTXOs in the UTXO store (Aerospike)
   - Uses parallel processing for improved performance (default: 500 workers)

## File Format Details

Both files use custom binary formats defined in `pkg/fileformat/`:

- **Magic Numbers**: Each file starts with an 8-byte magic number identifying the format
  - Headers: `U-H-1.0 ` (0x552D482D312E3020)
  - UTXO Set: `U-S-1.0 ` (0x552D532D312E3020)

- **Structure**: Binary-encoded data structures containing blockchain and UTXO information

## Network Context

TSTN (Test STN) is Bitcoin SV's scaling test network, designed for:
- Testing high transaction throughput
- Validating node performance at scale
- Development and integration testing

These seed files allow rapid deployment of test nodes without requiring full blockchain sync.

## Generation

These files are typically generated by:
1. The UTXO Persister service running on a fully synced node
2. Export at specific block heights for distribution
3. Used for bootstrapping test environments or node recovery

## See Also

- [Seeder Command Documentation](../docs/topics/commands/seeder.md)
- [Developer Setup Guide](../docs/tutorials/developers/developerSetup.md)
- [Miner CLI How-To](../docs/howto/miners/minersHowToTeranodeCLI.md)
